{% extends 'dashboard.html.twig' %}

{% block title %}Les Flights{% endblock %}

{% block body %}
    <h1 class="mt-4">Les Flights</h1>
    <ol class="breadcrumb mb-4">
        <li class="breadcrumb-item active">Les Flights</li>
    </ol>
    <div class="card mb-4">
        <div class="card-header">
            <a class="btn btn-success" href="{{ path('ajouterFlight') }}"><i class="fa fa-plus"></i> </a>
            <svg class="svg-inline--fa fa-table fa-w-16 me-1" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="table" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64v-96h160v96zm0-160H64v-96h160v96zm224 160H288v-96h160v96zm0-160H288v-96h160v96z"></path></svg><!-- <i class="fas fa-table me-1"></i> Font Awesome fontawesome.com -->
            Les Flights
        </div>
        <div class="card-body">

         <table class="table">
                        <thead>
                        <tr>
                            <th>
                                Ville depart
                            </th>
                            <th>
                                Ville Arrive
                            </th>
                            <th>
                                date Depart
                            </th>
                            <th>
                                Date Arrive
                            </th>
                            <th>
                                Prix
                            </th>
                            <th>
                                Num Plane
                            </th>
                            <th>
                                Compagnie
                            </th>
                            <th>
                                Quantite
                            </th>
                            <th>
                                image
                            </th>
                            <th>
                                Actions
                            </th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for vol in flights %}
                        <tr>
                            <td>{{ vol.villedepart }}</td>
                            <td>{{ vol.villearrivee }}</td>
                            <td>{{ vol.datedepart | date('Y-m-D')  }}</td>
                            <td>{{ vol.datearrive | date('Y-m-D') }}</td>
                            <td>{{ vol.prix}}</td>
                            <td>{{ vol.numplane}}</td>
                            <td>{{ vol.compagnie}}</td>
                            <td>{{ vol.quantite}}</td>
                            <td>
                                <img src="{{ asset('front/assets/img/vols/'~ vol.image)}}" style="width: 50px; height:50px;"  alt="">
                            </td>
                            <td>
                                <a class="btn btn-warning" href="{{ path('modifierFlight' , {"id" : vol.id}) }}"><i class="fa fa-edit"></i></a>
                            </td>

                            <td><!-- Button trigger modal -->
                                <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#exampleModal">
                                    Supprimer
                                </button>

                                <!-- Modal -->
                                <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="exampleModalLabel">Voulez Supprimer ?</h5>
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                            </div>
                                            <div class="modal-body">
                                                <form method="post"  action="{{ path('supFlight',{'id': vol.id})}}">
                                                    <input type="hidden" name="_method" value="SUP">
                                                    <input type="hidden" name="_token" value="{{ csrf_token('SUP' ~ vol.id)}}">
                                                    <input type="submit" class="btn btn-danger w-100" value="supprimer">
                                                </form>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                <button type="button" class="btn btn-primary">Save changes</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                        </tbody>
                    </table>
         </div>
{% endblock %}